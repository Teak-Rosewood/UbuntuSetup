# Building on tenorrt base container
FROM nvcr.io/nvidia/tensorrt:23.09-py3

LABEL maintainer "Saatwik Vasishtha  <saatwik.vasishtha@gmail.com>"

# Setting up tensorrt examples
RUN /opt/tensorrt/python/python_setup.sh

# Seting up general installations
RUN apt-get update && apt-get install -y --no-install-recommends \
	protobuf-compiler \
	geany \
	libprotoc-dev \
	python3-tk \
	eog \
	gedit \
	build-essential \
	cmake \
	git \
	wget \
	unzip \
	yasm \
	pkg-config \
	libswscale-dev \
	libtbb2 \
	libtbb-dev \
	libjpeg-dev \
	libpng-dev \
	libtiff-dev \
	libavformat-dev \
	libpq-dev \
	&& rm -rf /var/lib/apt/lists/*

# pip installations
RUN pip3 install numpy\
	onnx\
	pycuda\
	Pillow\
	wget\
	matplotlib

# setting working direcrory to root
WORKDIR /

# Installing OpenCV
RUN apt-get update -y || true && \
DEBIAN_FRONTEND=noninteractive apt-get install -y tzdata libx11-dev && \
apt-get install -y --no-install-recommends libopencv-dev && \
     rm -rf /var/lib/apt/lists/* && apt autoremove && apt clean

WORKDIR /workspace

